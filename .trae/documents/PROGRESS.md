# PROGRESS

用于沉淀“如何更高效地让 Trae 完成工作”的经验教训，避免重复踩坑。

## 原则

* Context, not control：给清晰上下文与验收标准，减少微管理

* 闭环优先：任务要能验证、有产物、有失败原因

* 小步快跑：优先拆成可独立完成的小任务，降低失败率

## 常见问题与修正

* 问题：任务描述过大导致执行发散
  修正：先写 Plan（目标/假设/验收），再拆分为多个 todo

* 问题：缺少来源导致结论难复用
  修正：所有关键结论必须带链接或文件路径引用

* 问题：修改笔记时结构不统一
  修正：优先对齐原文件风格，必要时只新增小节，不做大规模重排

## 新增经验

* **主动催促用户执行Todo**：当发现用户是任务执行的重要block点时，必须主动提醒

  * **何时需要催促**：

    * Assignee 为 User 的任务长期处于 Pending 状态

    * 其他任务都依赖该 User 任务才能继续执行

    * 例如：OpenClaw 安装配置、飞书机器人创建等需要用户手动操作的任务

  * **如何催促**：

    * 明确告知用户："这个任务是后续工作的前置条件，需要您先完成"

    * 提供清晰的操作指引（参考 Plan 中的步骤）

    * 询问是否遇到困难，是否需要帮助

    * 不要过度打扰，但要确保用户意识到任务的重要性

* **Trae 自动执行调研结论**：Trae 目前没有命令行/API 可以自动触发执行

  * 替代方案：创建提示清单脚本 `todo-prompt.py`，扫描 Pending 任务，生成格式化的执行清单，供人工确认后执行

  * 提示清单保存到 `.trae/logs/pending-tasks-*.md`，避免遗忘

* **OpenClaw 集成思路**：OpenClaw 适合作为多渠道 Inbox（Lark/Telegram 等），通过自定义 Skill 写入本项目的 INBOX.md

  * 完整集成方案见 `.trae/documents/OpenClaw集成方案.md`

* **Todo 分类原则（重要！）**：严格区分 User 需要做的任务 vs AI 需要做的任务

  * **User 需要做的任务**：需要用户在 Mac/手机/控制台操作的（如 SSH 配置、浏览器访问、安全组设置等）

  * **AI 需要做的任务**：AI 可以完全自动执行的（写代码、整理笔记、调研分析等）

  * **示例**："解决火山引擎 OpenClaw Web Manager 访问问题" → 需要用户操作 SSH/安全组，属于 User 任务

  * **本次教训**：差点把 User 任务放在 AI 任务分类下，被用户及时纠正

* **笔记整理经验：先提取 Markdown 目录层级**：在阅读或修改 Markdown 文件时，先提取文件的目录层级，帮助判断需要阅读/修改哪些 section

  * **适用场景**：整理笔记、修改文件内容、查找合适位置插入新内容

  * **好处**：快速了解文件结构，避免盲目阅读，提高操作精准度

  * **操作方式**：读取文件后，先解析并展示 #、##、### 等标题层级，形成目录树

* **【强制】开始推进 todo 前必须先标记为 in-progress**：避免多 session 同时执行同一个 task 造成冲突

  * **核心原则**：当决定开始推进某个 todo 时，第一时间先把它从 pending 改为 in-progress

  * **为什么重要**：如果有多个 session 在同时运行，不先标记的话可能导致两个 session 同时执行同一个任务

  * **标准流程**：

    1. 使用 priority-task-reader 找到下一个应该执行的任务
    2. 立即编辑 todos.json，把该任务的 status 从 pending 改为 in-progress
    3. 添加 started\_at 时间戳
    4. 然后才开始实际执行任务

  * **本次教训**：差点忘记标记，被用户及时纠正

* **笔记整理经验：内容分散原则**：一篇文章可能包含多方面内容，应分散到不同文件的合适 section 中

  * **适用场景**：整理包含多方面内容的外部材料（文章、视频等）

  * **判断标准**：

    * 产品/公司视角的内容 → `AI-Agent-Product&PE.md`

    * 技术细节/算法视角的内容 → `AI-Algorithms.md`

  * **好处**：

    * 便于分类检索和后续使用

    * 每个文件保持单一职责

    * 避免内容堆砌在一个文件里

  * **操作方式**：

    * 先分析文章包含哪些方面的内容

    * 找到对应的笔记文件和 section

    * 在产品视角的文件中保留摘要，并链接到技术细节文件

    * 在技术细节文件中放完整的技术内容

