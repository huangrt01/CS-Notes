# Todos Web Manager 核心功能实现方案

## 概述

基于 Todos Web Manager 设计方案，实现核心功能。

## 核心功能清单

### 1. 任务列表显示

**功能描述：**
- 从 `.trae/documents/todos管理系统.md` 读取任务列表
- 按状态分组显示（Pending/进行中/已完成）
- 显示任务基本信息（标题、优先级、Assignee、截止日期）

**实现思路：**
- 解析 Markdown 文件，提取任务列表
- 使用正则表达式或 Markdown 解析器
- 支持 `- [ ]` 和 `- [x]` 格式

**技术难点：**
- Markdown 文件格式可能不规范
- 任务字段提取需要灵活处理

### 2. 添加新任务

**功能描述：**
- 提供表单界面，输入任务信息
- 支持：标题、优先级、Assignee、标签、链接、截止日期
- 提交后写入 `.trae/documents/INBOX.md` 或直接写入 Pending

**实现思路：**
- 使用 HTML 表单
- 前端验证输入
- 后端（或前端）生成 Markdown 格式
- 写入文件

### 3. 标记任务完成

**功能描述：**
- 在任务列表中点击复选框
- 将任务从 Pending 移动到 Completed
- 更新 Markdown 文件

**实现思路：**
- 监听复选框点击事件
- 更新任务状态
- 重新生成 Markdown 文件
- 保存文件

### 4. 任务分类和筛选

**功能描述：**
- 按状态筛选（All/Pending/进行中/已完成）
- 按优先级筛选（All/High/Medium/Low）
- 按 Assignee 筛选（All/AI/User）
- 搜索功能（按标题搜索）

**实现思路：**
- 前端过滤（无需后端）
- 使用 JavaScript 数组过滤
- 实时更新显示

### 5. 优先级设置

**功能描述：**
- 在添加/编辑任务时选择优先级
- 显示优先级标签（High/Medium/Low）
- 支持颜色区分（红色/黄色/绿色）

**实现思路：**
- 使用下拉菜单或单选按钮
- CSS 样式区分颜色
- 保存到 Markdown 文件

### 6. 手机端快速提交任务

**功能描述：**
- 优化手机端界面
- 简化表单（只保留核心字段）
- 支持语音输入（可选）

**实现思路：**
- 响应式设计
- 移动端优化的 UI
- 使用浏览器 Web Speech API（语音输入）

## 实现优先级

### Phase 1（MVP - 最小可用版本）
- [ ] 任务列表显示
- [ ] 添加新任务
- [ ] 标记任务完成

### Phase 2（核心功能）
- [ ] 任务分类和筛选
- [ ] 优先级设置
- [ ] 搜索功能

### Phase 3（增强功能）
- [ ] 手机端快速提交任务
- [ ] 语音输入
- [ ] Plan 管理

## 需要用户决策的问题

1. **MVP 范围确认**：Phase 1 的功能是否够用？
   - 是：先实现 Phase 1，快速验证 ———— 用户选择
   - 否：需要增加哪些功能到 MVP？

2. **Markdown 格式标准化**：是否需要标准化 todos管理系统.md 的格式？
   - 是：制定严格的格式规范 ———— 用户选择
   - 否：保持灵活，兼容现有格式

3. **文件保存方式**：如何保存修改后的 Markdown 文件？
   - 方式一：直接覆盖原文件（简单，但有风险）
   - 方式二：先备份，再保存（安全，但复杂）
   - 方式三：使用 Git 版本控制（推荐，需要 Git 集成） ———— 用户选择

4. **实时同步**：是否需要实时同步多个用户的修改？
   - 是：需要后端 + WebSocket ———— 用户选择
   - 否：单用户使用，无需实时同步

## 技术实现细节

### Markdown 解析方案

**方案一：正则表达式（简单快速）**
```javascript
// 匹配任务行
const taskRegex = /^\* \[([ x])\] (.*)$/gm;
// 匹配优先级
const priorityRegex = /- Priority：(high|medium|low)/i;
```

**方案二：使用 Markdown 解析库（更准确）**
- marked.js
- markdown-it
- remark

**推荐方案一**，因为我们的格式相对简单。

### 文件读写方案

**浏览器端（纯静态方案）：**
- 使用 File API 读取文件
- 使用 Blob + URL.createObjectURL 下载文件
- 用户需要手动选择文件

**后端方案：**
- 使用 Node.js fs 模块
- 或 Python Flask 的文件操作
- 自动读写，无需用户干预

## 下一步行动

1. 用户确认 MVP 范围
2. 用户确认文件保存方式
3. 创建项目结构
4. 实现 Phase 1 功能
5. 测试验证
