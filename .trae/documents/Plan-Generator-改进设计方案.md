# Plan Generator 改进设计方案

## 问题分析

当前的 `plan-generator` 只是简单的模板填充，存在以下问题：

1. **模板化严重**：所有 plan 都是一样的格式，内容都是通用的
2. **没有真正分析任务**：没有使用 LLM 来理解任务、拆解任务
3. **缺少背景和细节**：没有梳理任务的背景、上下文、相关信息
4. **缺少具体步骤**：执行步骤都是通用的（分析、执行、验证），没有针对具体任务的细化

## 好的 Plan 应该包含什么

### 1. 背景与动机
- 为什么要做这个任务？
- 这个任务解决什么问题？
- 有什么上下文或历史信息？

### 2. 核心洞察
- 这个任务的关键点是什么？
- 有什么需要特别注意的地方？
- 有什么潜在的坑或风险？

### 3. 任务拆解
- 将大任务拆成小的、可执行的步骤
- 每个步骤都有明确的目标和产出
- 步骤之间有清晰的逻辑关系

### 4. 具体执行步骤
- 详细的、可操作的步骤
- 每个步骤都有：做什么、怎么做、产出什么
- 步骤要具体到能直接执行

### 5. 验收标准
- 明确的、可验证的验收标准
- 每个步骤都有对应的验收条件
- 最终任务完成的判断标准

### 6. 风险与挑战
- 可能遇到的问题
- 应对方案
- 备选方案

### 7. 相关资源
- 相关的文件路径
- 相关的链接
- 相关的笔记或文档

## 改进方案

### 改进后的 Plan 结构

```markdown
---
id: plan-xxx
title: "任务标题"
priority: high
status: pending
created_at: ...
updated_at: ...
tags: []
---

## 📋 背景与动机
- 为什么要做这个任务
- 解决什么问题
- 相关的上下文信息

## 💡 核心洞察
- 任务的关键点
- 需要特别注意的地方
- 潜在的坑或风险

## 🎯 任务拆解
- 步骤 1：xxx（目标：xxx，产出：xxx）
- 步骤 2：xxx（目标：xxx，产出：xxx）
- 步骤 3：xxx（目标：xxx，产出：xxx）

## 🔨 具体执行步骤
### 步骤 1：xxx
- 做什么：xxx
- 怎么做：xxx
- 产出：xxx
- 验收标准：xxx

### 步骤 2：xxx
- 做什么：xxx
- 怎么做：xxx
- 产出：xxx
- 验收标准：xxx

...

## ✅ 验收标准
- 标准 1：xxx
- 标准 2：xxx
- 标准 3：xxx

## ⚠️ 风险与挑战
- 风险 1：xxx，应对：xxx
- 风险 2：xxx，应对：xxx

## 📚 相关资源
- 文件：xxx
- 链接：xxx
- 笔记：xxx

---

## 📝 执行记录
```

## 实现计划

1. 改进 `plan-generator` skill，使用 LLM 真正分析任务
2. 设计好的 prompt，让 LLM 生成符合上述结构的 plan
3. 测试新的 plan generator，验证生成的 plan 质量
4. 迭代优化，不断改进 plan 的质量
