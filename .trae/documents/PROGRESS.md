# PROGRESS

用于沉淀“如何更高效地让 Trae 完成工作”的经验教训，避免重复踩坑。

## 原则
- Context, not control：给清晰上下文与验收标准，减少微管理
- 闭环优先：任务要能验证、有产物、有失败原因
- 小步快跑：优先拆成可独立完成的小任务，降低失败率

## 常见问题与修正
- 问题：任务描述过大导致执行发散
  修正：先写 Plan（目标/假设/验收），再拆分为多个 todo
- 问题：缺少来源导致结论难复用
  修正：所有关键结论必须带链接或文件路径引用
- 问题：修改笔记时结构不统一
  修正：优先对齐原文件风格，必要时只新增小节，不做大规模重排

## 新增经验
- **【强制】任务完成后必须立即归档到 TODO_ARCHIVE.md**：Trae 经常忘记，必须长记性！
  - **核心原则**：任何任务标记为完成后，第一时间移动到 TODO_ARCHIVE.md
  - **标准流程**：
    1. 任务执行完成后，立即从 In Progress / Completed 移动到 TODO_ARCHIVE.md
    2. 标记为 `- [x]`
    3. 添加 `Completed At` 时间戳（格式：YYYY-MM-DD）
    4. 保留完整的 Progress、产出物、Definition of Done、Plan 信息
  - **归档位置**：TODO_ARCHIVE.md 按日期分组存放，新任务放在对应日期的最前面
  - **主列表要求**：todos管理系统.md 的"已完成" section 只保留归档链接，不存放实际任务内容
- **主动催促用户执行Todo**：当发现用户是任务执行的重要block点时，必须主动提醒
  - **何时需要催促**：
    - Assignee 为 User 的任务长期处于 Pending 状态
    - 其他任务都依赖该 User 任务才能继续执行
    - 例如：OpenClaw 安装配置、飞书机器人创建等需要用户手动操作的任务
  - **如何催促**：
    - 明确告知用户："这个任务是后续工作的前置条件，需要您先完成"
    - 提供清晰的操作指引（参考 Plan 中的步骤）
    - 询问是否遇到困难，是否需要帮助
    - 不要过度打扰，但要确保用户意识到任务的重要性
- **待办归档机制（重要！）**：任务完成后必须立即归档到 TODO_ARCHIVE.md
  - 创建 `TODO_ARCHIVE.md` 存放历史完成任务
  - 在主列表中保留"已完成" section，只放归档链接
  - 归档文件按日期分组，便于追溯和复盘
- **Trae 自动执行调研结论**：Trae 目前没有命令行/API 可以自动触发执行
  - 替代方案：创建提示清单脚本 `todo-prompt.py`，扫描 Pending 任务，生成格式化的执行清单，供人工确认后执行
  - 提示清单保存到 `.trae/logs/pending-tasks-*.md`，避免遗忘
- **OpenClaw 集成思路**：OpenClaw 适合作为多渠道 Inbox（Lark/Telegram 等），通过自定义 Skill 写入本项目的 INBOX.md
  - 完整集成方案见 `.trae/documents/OpenClaw集成方案.md`
- **Todo 分类原则（重要！）**：严格区分 User 需要做的任务 vs AI 需要做的任务
  - **User 需要做的任务**：需要用户在 Mac/手机/控制台操作的（如 SSH 配置、浏览器访问、安全组设置等）
  - **AI 需要做的任务**：AI 可以完全自动执行的（写代码、整理笔记、调研分析等）
  - **示例**："解决火山引擎 OpenClaw Web Manager 访问问题" → 需要用户操作 SSH/安全组，属于 User 任务
  - **本次教训**：差点把 User 任务放在 AI 任务分类下，被用户及时纠正
